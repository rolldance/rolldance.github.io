(function(e){"use strict";var t=false;e(document).on("click","a[data-reveal-id]",function(t){t.preventDefault();var n=e(this).attr("data-reveal-id");e("#"+n).reveal(e(this).data())});e.fn.reveal=function(n){var r=e(document),i={animation:"fadeAndPop",animationSpeed:300,closeOnBackgroundClick:true,dismissModalClass:"close-reveal-modal",open:e.noop,opened:e.noop,close:e.noop,closed:e.noop};n=e.extend({},i,n);return this.not(".reveal-modal.open").each(function(){function c(){u=false}function h(){u=true}function p(){var n=e(".reveal-modal.open");if(n.length===1){t=true;n.trigger("reveal:close")}}function d(){if(!u){h();p();i.addClass("open");if(n.animation==="fadeAndPop"){f.open.top=r.scrollTop()-o;f.open.opacity=0;i.css(f.open);a.fadeIn(n.animationSpeed/2);i.delay(n.animationSpeed/2).animate({top:r.scrollTop()+s+"px",opacity:1},n.animationSpeed,function(){i.trigger("reveal:opened")})}if(n.animation==="fade"){f.open.top=r.scrollTop()+s;f.open.opacity=0;i.css(f.open);a.fadeIn(n.animationSpeed/2);i.delay(n.animationSpeed/2).animate({opacity:1},n.animationSpeed,function(){i.trigger("reveal:opened")})}if(n.animation==="none"){f.open.top=r.scrollTop()+s;f.open.opacity=1;i.css(f.open);a.css({display:"block"});i.trigger("reveal:opened")}}}function v(){var e=i.find(".flex-video"),t=e.find("iframe");if(t.length>0){t.attr("src",t.data("src"));e.fadeIn(100)}}function m(){if(!u){h();i.removeClass("open");if(n.animation==="fadeAndPop"){i.animate({top:r.scrollTop()-o+"px",opacity:0},n.animationSpeed/2,function(){i.css(f.close)});if(!t){a.delay(n.animationSpeed).fadeOut(n.animationSpeed,function(){i.trigger("reveal:closed")})}else{i.trigger("reveal:closed")}}if(n.animation==="fade"){i.animate({opacity:0},n.animationSpeed,function(){i.css(f.close)});if(!t){a.delay(n.animationSpeed).fadeOut(n.animationSpeed,function(){i.trigger("reveal:closed")})}else{i.trigger("reveal:closed")}}if(n.animation==="none"){i.css(f.close);if(!t){a.css({display:"none"})}i.trigger("reveal:closed")}t=false}}function g(){i.unbind(".reveal");a.unbind(".reveal");l.unbind(".reveal");e("body").unbind(".reveal")}function y(){var e=i.find(".flex-video"),t=e.find("iframe");if(t.length>0){t.data("src",t.attr("src"));t.attr("src","");e.fadeOut(100)}}var i=e(this),s=parseInt(i.css("top"),10),o=i.height()+s,u=false,a=e(".reveal-modal-bg"),f={open:{top:0,opacity:0,visibility:"visible",display:"block"},close:{top:s,opacity:1,visibility:"hidden",display:"none"}},l;if(a.length===0){a=e("<div />",{"class":"reveal-modal-bg"}).insertAfter(i);a.fadeTo("fast",.8)}i.bind("reveal:open.reveal",d);i.bind("reveal:open.reveal",v);i.bind("reveal:close.reveal",m);i.bind("reveal:closed.reveal",y);i.bind("reveal:opened.reveal reveal:closed.reveal",c);i.bind("reveal:closed.reveal",g);i.bind("reveal:open.reveal",n.open);i.bind("reveal:opened.reveal",n.opened);i.bind("reveal:close.reveal",n.close);i.bind("reveal:closed.reveal",n.closed);i.trigger("reveal:open");l=e("."+n.dismissModalClass).bind("click.reveal",function(){i.trigger("reveal:close")});if(n.closeOnBackgroundClick){a.css({cursor:"pointer"});a.bind("click.reveal",function(){i.trigger("reveal:close")})}e("body").bind("keyup.reveal",function(e){if(e.which===27){i.trigger("reveal:close")}})})}})(jQuery)